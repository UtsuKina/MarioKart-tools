// 日本語 → 英語マッピング
const courseNameMap = {
  "DKうちゅうセンター": "DK Spaceport",
  "DKスノーマウンテン": "DK Pass",
  "アイスビルディング": "Sky-High Sundae",
  "おばけシネマ": "Boo Cinema",
  "キノピオファクトリー": "Toad's Factory",
  "キラーシップ": "Airship Fortress",
  "クッパキャッスル": "Bowser's Castle",
  "サンサンさばく": "Desert Hills",
  "シュポポコースター": "Whistlestop Summit",
  "ショーニューロード": "Dandelion Depths",
  "ソルティータウン": "Salty Salty Speedway",
  "チョコマウンテン": "Choco Mountain",
  "ディノディノジャングル": "Dino Dino Jungle",
  "トロフィーシティ": "Crown City",
  "どんぐりツリーハウス": "Acorn Heights",
  "ノコノコビーチ": "Koopa Troopa Beach",
  "ハテナしんでん": "Great  Block Ruins",
  "ピーチスタジアム": "Peach Stadium",
  "ピーチビーチ": "Peach Beach",
  "プクプクフォールズ": "Cheep Cheep Falls",
  "ヘイホーカーニバル": "Shy Guy Bazaar",
  "ホネホネツイスター": "Dry Bones Burnout",
  "マリオサーキット": "Mario Circuit",
  "マリオブラザーズサーキット": "Mario Bros. Circuit",
  "モーモーカントリー": "Moo Moo Meadows",
  "リバーサイドサファリ": "Faraway Oasis",
  "レインボーロード": "Rainbow Road",
  "ロゼッタてんもんだい": "Starview Peak",
  "ワリオシップ": "Wario Shipyard",
  "ワリオスタジアム": "Wario Stadium"
};

// 始点・終点ルート（通常202 + 特殊30 = 232件）
const routes = [
  ["DKうちゅうセンター", "サンサンさばく"],
  ["DKうちゅうセンター", "シュポポコースター"],
  ["DKうちゅうセンター", "トロフィーシティ"],
  ["DKうちゅうセンター", "ノコノコビーチ"],
  ["DKうちゅうセンター", "ピーチスタジアム"],
  ["DKうちゅうセンター", "マリオブラザーズサーキット"],
  ["DKスノーマウンテン", "アイスビルディング"],
  ["DKスノーマウンテン", "ショーニューロード"],
  ["DKスノーマウンテン", "ソルティータウン"],
  ["DKスノーマウンテン", "プクプクフォールズ"],
  ["DKスノーマウンテン", "モーモーカントリー"],
  ["DKスノーマウンテン", "ロゼッタてんもんだい"],
  ["DKスノーマウンテン", "ワリオシップ"],
  ["アイスビルディング", "DKスノーマウンテン"],
  ["アイスビルディング", "ショーニューロード"],
  ["アイスビルディング", "ソルティータウン"],
  ["アイスビルディング", "プクプクフォールズ"],
  ["アイスビルディング", "ロゼッタてんもんだい"],
  ["アイスビルディング", "ワリオシップ"],
  ["おばけシネマ", "ショーニューロード"],
  ["おばけシネマ", "どんぐりツリーハウス"],
  ["おばけシネマ", "ホネホネツイスター"],
  ["おばけシネマ", "マリオサーキット"],
  ["おばけシネマ", "ロゼッタてんもんだい"],
  ["キノピオファクトリー", "キラーシップ"],
  ["キノピオファクトリー", "クッパキャッスル"],
  ["キノピオファクトリー", "ショーニューロード"],
  ["キノピオファクトリー", "チョコマウンテン"],
  ["キノピオファクトリー", "どんぐりツリーハウス"],
  ["キノピオファクトリー", "ピーチスタジアム"],
  ["キノピオファクトリー", "ホネホネツイスター"],
  ["キノピオファクトリー", "マリオサーキット"],
  ["キノピオファクトリー", "マリオブラザーズサーキット"],
  ["キノピオファクトリー", "モーモーカントリー"],
  ["キノピオファクトリー", "ワリオスタジアム"],
  ["キラーシップ", "キノピオファクトリー"],
  ["キラーシップ", "クッパキャッスル"],
  ["キラーシップ", "ヘイホーカーニバル"],
  ["キラーシップ", "ホネホネツイスター"],
  ["キラーシップ", "ワリオスタジアム"],
  ["クッパキャッスル", "キノピオファクトリー"],
  ["クッパキャッスル", "キラーシップ"],
  ["クッパキャッスル", "チョコマウンテン"],
  ["クッパキャッスル", "ホネホネツイスター"],
  ["クッパキャッスル", "マリオサーキット"],
  ["クッパキャッスル", "ワリオスタジアム"],
  ["サンサンさばく", "シュポポコースター"],
  ["サンサンさばく", "トロフィーシティ"],
  ["サンサンさばく", "ノコノコビーチ"],
  ["サンサンさばく", "ヘイホーカーニバル"],
  ["サンサンさばく", "マリオブラザーズサーキット"],
  ["シュポポコースター", "DKうちゅうセンター"],
  ["シュポポコースター", "サンサンさばく"],
  ["シュポポコースター", "チョコマウンテン"],
  ["シュポポコースター", "トロフィーシティ"],
  ["シュポポコースター", "ノコノコビーチ"],
  ["シュポポコースター", "マリオブラザーズサーキット"],
  ["ショーニューロード", "DKスノーマウンテン"],
  ["ショーニューロード", "アイスビルディング"],
  ["ショーニューロード", "おばけシネマ"],
  ["ショーニューロード", "キノピオファクトリー"],
  ["ショーニューロード", "どんぐりツリーハウス"],
  ["ショーニューロード", "プクプクフォールズ"],
  ["ショーニューロード", "マリオサーキット"],
  ["ショーニューロード", "モーモーカントリー"],
  ["ショーニューロード", "ロゼッタてんもんだい"],
  ["ソルティータウン", "DKスノーマウンテン"],
  ["ソルティータウン", "ディノディノジャングル"],
  ["ソルティータウン", "ハテナしんでん"],
  ["ソルティータウン", "ピーチビーチ"],
  ["ソルティータウン", "プクプクフォールズ"],
  ["ソルティータウン", "リバーサイドサファリ"],
  ["ソルティータウン", "ワリオシップ"],
  ["チョコマウンテン", "キノピオファクトリー"],
  ["チョコマウンテン", "クッパキャッスル"],
  ["チョコマウンテン", "シュポポコースター"],
  ["チョコマウンテン", "トロフィーシティ"],
  ["チョコマウンテン", "ピーチスタジアム"],
  ["チョコマウンテン", "プクプクフォールズ"],
  ["チョコマウンテン", "ヘイホーカーニバル"],
  ["チョコマウンテン", "マリオブラザーズサーキット"],
  ["チョコマウンテン", "モーモーカントリー"],
  ["チョコマウンテン", "ワリオスタジアム"],
  ["ディノディノジャングル", "ソルティータウン"],
  ["ディノディノジャングル", "ノコノコビーチ"],
  ["ディノディノジャングル", "ハテナしんでん"],
  ["ディノディノジャングル", "ピーチビーチ"],
  ["ディノディノジャングル", "リバーサイドサファリ"],
  ["トロフィーシティ", "DKうちゅうセンター"],
  ["トロフィーシティ", "サンサンさばく"],
  ["トロフィーシティ", "シュポポコースター"],
  ["トロフィーシティ", "チョコマウンテン"],
  ["トロフィーシティ", "ノコノコビーチ"],
  ["トロフィーシティ", "ピーチスタジアム"],
  ["トロフィーシティ", "マリオブラザーズサーキット"],
  ["トロフィーシティ", "モーモーカントリー"],
  ["トロフィーシティ", "リバーサイドサファリ"],
  ["トロフィーシティ", "ワリオスタジアム"],
  ["どんぐりツリーハウス", "おばけシネマ"],
  ["どんぐりツリーハウス", "キノピオファクトリー"],
  ["どんぐりツリーハウス", "ショーニューロード"],
  ["どんぐりツリーハウス", "ホネホネツイスター"],
  ["どんぐりツリーハウス", "マリオサーキット"],
  ["ノコノコビーチ", "DKうちゅうセンター"],
  ["ノコノコビーチ", "ディノディノジャングル"],
  ["ノコノコビーチ", "トロフィーシティ"],
  ["ノコノコビーチ", "ピーチスタジアム"],
  ["ノコノコビーチ", "リバーサイドサファリ"],
  ["ハテナしんでん", "ソルティータウン"],
  ["ハテナしんでん", "ディノディノジャングル"],
  ["ハテナしんでん", "ノコノコビーチ"],
  ["ハテナしんでん", "ピーチビーチ"],
  ["ハテナしんでん", "リバーサイドサファリ"],
  ["ピーチスタジアム", "キノピオファクトリー"],
  ["ピーチスタジアム", "チョコマウンテン"],
  ["ピーチスタジアム", "トロフィーシティ"],
  ["ピーチスタジアム", "ノコノコビーチ"],
  ["ピーチスタジアム", "プクプクフォールズ"],
  ["ピーチスタジアム", "モーモーカントリー"],
  ["ピーチスタジアム", "リバーサイドサファリ"],
  ["ピーチスタジアム", "レインボーロード"],
  ["ピーチビーチ", "ソルティータウン"],
  ["ピーチビーチ", "ディノディノジャングル"],
  ["ピーチビーチ", "ハテナしんでん"],
  ["ピーチビーチ", "リバーサイドサファリ"],
  ["ピーチビーチ", "ワリオシップ"],
  ["プクプクフォールズ", "DKスノーマウンテン"],
  ["プクプクフォールズ", "ショーニューロード"],
  ["プクプクフォールズ", "ソルティータウン"],
  ["プクプクフォールズ", "チョコマウンテン"],
  ["プクプクフォールズ", "ピーチスタジアム"],
  ["プクプクフォールズ", "モーモーカントリー"],
  ["プクプクフォールズ", "リバーサイドサファリ"],
  ["プクプクフォールズ", "ロゼッタてんもんだい"],
  ["プクプクフォールズ", "ワリオシップ"],
  ["ヘイホーカーニバル", "キラーシップ"],
  ["ヘイホーカーニバル", "サンサンさばく"],
  ["ヘイホーカーニバル", "チョコマウンテン"],
  ["ヘイホーカーニバル", "マリオブラザーズサーキット"],
  ["ヘイホーカーニバル", "ワリオスタジアム"],
  ["ホネホネツイスター", "おばけシネマ"],
  ["ホネホネツイスター", "キノピオファクトリー"],
  ["ホネホネツイスター", "キラーシップ"],
  ["ホネホネツイスター", "クッパキャッスル"],
  ["ホネホネツイスター", "どんぐりツリーハウス"],
  ["ホネホネツイスター", "マリオサーキット"],
  ["ホネホネツイスター", "モーモーカントリー"],
  ["ホネホネツイスター", "ワリオスタジアム"],
  ["マリオサーキット", "おばけシネマ"],
  ["マリオサーキット", "キノピオファクトリー"],
  ["マリオサーキット", "クッパキャッスル"],
  ["マリオサーキット", "ショーニューロード"],
  ["マリオサーキット", "どんぐりツリーハウス"],
  ["マリオサーキット", "ピーチスタジアム"],
  ["マリオサーキット", "ホネホネツイスター"],
  ["マリオサーキット", "モーモーカントリー"],
  ["マリオサーキット", "ロゼッタてんもんだい"],
  ["マリオブラザーズサーキット", "キノピオファクトリー"],
  ["マリオブラザーズサーキット", "サンサンさばく"],
  ["マリオブラザーズサーキット", "シュポポコースター"],
  ["マリオブラザーズサーキット", "チョコマウンテン"],
  ["マリオブラザーズサーキット", "トロフィーシティ"],
  ["マリオブラザーズサーキット", "ヘイホーカーニバル"],
  ["マリオブラザーズサーキット", "ワリオスタジアム"],
  ["モーモーカントリー", "DKスノーマウンテン"],
  ["モーモーカントリー", "キノピオファクトリー"],
  ["モーモーカントリー", "ショーニューロード"],
  ["モーモーカントリー", "チョコマウンテン"],
  ["モーモーカントリー", "トロフィーシティ"],
  ["モーモーカントリー", "ピーチスタジアム"],
  ["モーモーカントリー", "プクプクフォールズ"],
  ["モーモーカントリー", "ホネホネツイスター"],
  ["モーモーカントリー", "マリオサーキット"],
  ["リバーサイドサファリ", "ソルティータウン"],
  ["リバーサイドサファリ", "ディノディノジャングル"],
  ["リバーサイドサファリ", "トロフィーシティ"],
  ["リバーサイドサファリ", "ノコノコビーチ"],
  ["リバーサイドサファリ", "ハテナしんでん"],
  ["リバーサイドサファリ", "ピーチスタジアム"],
  ["リバーサイドサファリ", "ピーチビーチ"],
  ["リバーサイドサファリ", "プクプクフォールズ"],
  ["ロゼッタてんもんだい", "DKスノーマウンテン"],
  ["ロゼッタてんもんだい", "アイスビルディング"],
  ["ロゼッタてんもんだい", "おばけシネマ"],
  ["ロゼッタてんもんだい", "ショーニューロード"],
  ["ロゼッタてんもんだい", "プクプクフォールズ"],
  ["ロゼッタてんもんだい", "マリオサーキット"],
  ["ロゼッタてんもんだい", "ワリオシップ"],
  ["ワリオシップ", "DKスノーマウンテン"],
  ["ワリオシップ", "アイスビルディング"],
  ["ワリオシップ", "ソルティータウン"],
  ["ワリオシップ", "ピーチビーチ"],
  ["ワリオシップ", "プクプクフォールズ"],
  ["ワリオシップ", "ロゼッタてんもんだい"],
  ["ワリオスタジアム", "キノピオファクトリー"],
  ["ワリオスタジアム", "キラーシップ"],
  ["ワリオスタジアム", "クッパキャッスル"],
  ["ワリオスタジアム", "チョコマウンテン"],
  ["ワリオスタジアム", "トロフィーシティ"],
  ["ワリオスタジアム", "ヘイホーカーニバル"],
  ["ワリオスタジアム", "ホネホネツイスター"],
  ["ワリオスタジアム", "マリオブラザーズサーキット"],
  [ "DKうちゅうセンター","コース単体"],
  [ "DKスノーマウンテン","コース単体"],
  [ "アイスビルディング","コース単体"],
  ["おばけシネマ", "コース単体"],
  ["キノピオファクトリー", "コース単体"],
  ["キラーシップ", "コース単体"],
  ["クッパキャッスル", "コース単体"],
  ["サンサンさばく", "コース単体"],
  ["シュポポコースター", "コース単体"],
  ["ショーニューロード", "コース単体"],
  ["ソルティータウン", "コース単体"],
  ["チョコマウンテン", "コース単体"],
  ["ディノディノジャングル", "コース単体"],
  ["トロフィーシティ", "コース単体"],
  ["どんぐりツリーハウス", "コース単体"],
  ["ノコノコビーチ", "コース単体"],
  ["ハテナしんでん", "コース単体"],
  ["ピーチスタジアム", "コース単体"],
  ["ピーチビーチ", "コース単体"],
  ["プクプクフォールズ", "コース単体"],
  ["ヘイホーカーニバル", "コース単体"],
  ["ホネホネツイスター", "コース単体"],
  ["マリオサーキット", "コース単体"],
  ["マリオブラザーズサーキット", "コース単体"],
  ["モーモーカントリー", "コース単体"],
  ["リバーサイドサファリ", "コース単体"],
  ["レインボーロード", "コース単体"],
  ["ロゼッタてんもんだい", "コース単体"],
  ["ワリオシップ", "コース単体"],
  ["ワリオスタジアム", "コース単体"],
];

// デフォルト背景（画像が存在しないとき用）
const defaultBackground = "map_images/default.png";
// 画像拡張子
const imageExt = "png";

/**
 * 背景画像のファイル名を取得
 * @param {string} startJp - 始点の日本語名（"コース単体"可）
 * @param {string} endJp   - 終点の日本語名
 * @returns {string} ファイルパス
 */
function getBackground(startJp, endJp) {
  // 何も決まってなければデフォルト
  if (!startJp && !endJp) return defaultBackground;

  // ★特殊30：終点が「なし」のときは始点単独の画像を使う
  if (!endJp || endJp === "コース単体") {
    const start = courseNameMap[startJp] || startJp; // JP→EN
    return `map_images/${start}.${imageExt}`;
  }

  // 通常（始点→終点）
  const start = courseNameMap[startJp] || startJp; // JP→EN
  const end   = courseNameMap[endJp]   || endJp;   // JP→EN
  return `map_images/${start}_to_${end}.${imageExt}`;
}

